<!DOCTYPE html>
<html>
	<body>
		<h1>Data analysis</h1>
		<h2>Number of students in each department</h2>
		<div id="result">
		</div>
		<script>
		var tableHead = "<table border=\"1px\">";
		var columnHead = "<tr><th align=\"center\">Number of Students</th><th align=\"center\">Department</th></tr>";
		var columnData = "";
		var tableEnd = "</table>";
		loadData();
			function loadData(){
				var xmlhttp = new XMLHttpRequest();
				var url = "http://127.0.0.1:80/project/getQuery2.php";

				xmlhttp.onreadystatechange=function() {
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
						displayResponse(xmlhttp.responseText);
					}
				}
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function displayResponse(response) {
			var arr = JSON.parse(response);
			var i;
			columnData = "";
				for(i = 0; i < arr.length; i++) {
					columnData += "<tr><td align=\"center\">"+arr[i].NumberofStudents+"</td><td align=\"center\">"+arr[i].Department+"</td></tr>"
				}
				document.getElementById("result").innerHTML = tableHead+columnHead+columnData+tableEnd;
			}
		
		</script>
	</body>
</html>