<!DOCTYPE html>
<html>
	<body>
		<h1>Data analysis</h1>
		<h2>Number of students taking each preliminary course, group by type of application into university</h2>
		<div id="result">
		</div>
		<script>
		var tableHead = "<table border=\"1px\">";
		var columnHead = "<tr><td align=\"center\">Preliminary Course</td><td align=\"center\">AppType</td><td align=\"center\">Student Count</td></tr>";
		var columnData = "";
		var tableEnd = "</table>";
		search();
			function search(){
				var xmlhttp = new XMLHttpRequest();
				var url = "http://127.0.0.1:80/project/getQuery7.php";

				xmlhttp.onreadystatechange=function() {
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
						displayResponse(xmlhttp.responseText);
					}
				}
				xmlhttp.open("GET", url, true);
				xmlhttp.send();
			}

			function displayResponse(response) {
			var arr = JSON.parse(response);
			var i;
			columnData = "";
				for(i = 0; i < arr.length; i++) {
					columnData += "<tr><td align=\"center\">"+arr[i].PreCourse+"</td><td align=\"center\">"+arr[i].AppType+"</td><td align=\"center\">"+arr[i].SCount+"</td></tr>"
				}
				document.getElementById("result").innerHTML = tableHead+columnHead+columnData+tableEnd;
			}
		
		</script>
	</body>
</html>